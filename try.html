<!DOCTYPE html>
<html>
<head>
	<title>Random AJAX Welcome</title>
	
	<script>
		function getWelcome(){
			console
			var ajaxRequest = new XMLHttpRequest();
			ajaxRequest.onreadystatechange = function(){
			
				if(ajaxRequest.readyState == 4){
					//the request is completed, now check its status
					if(ajaxRequest.status == 200){
						//turn JSON into object
						var jsonObj = JSON.parse(ajaxRequest.responseText);
							
						var title = jsonObj.imgSet[i].title;
						var photoUrl = `https://clayplayground.github.io/${jsonObj.randomMessages[0].photoUrl}`;
						for (const imgSet of jsonObj.imgSet) {
							BuildDiv(imgSet);								
							}
						//inject in html
						place = document.getElementById("welcome");
						InjectFunc(title, photoUrl, place);
						
					}
					else{
						console.log("Status error: " + ajaxRequest.status);
					}
				}
				else{
					console.log("Ignored readyState: " + ajaxRequest.readyState);
				}
			
			
			}
			ajaxRequest.open('GET', 'https://clayplayground.github.io/resources/imageSet.json');
			ajaxRequest.send();
		}

		function InjectFunc(titlo, urlo, place){
			let element = document.createElement("div");
        element.innerHTML = 
        `   <div class="">
                <h1>${titlo}</h1>
            </div>
            <div class="serviceImage">
                <img src="${urlo}" alt="Doveva essere la volta buona">
            </div>`;
        //console.log(element); 

        //APPENDERE L'ELEMENTO
        place.appendChild(element);
		}

		function BuildDiv(objSet){
			let element = document.createElement("div");
			//aggiungere al div gli elementi di una card
		}
	
	</script>	
</head>
<body onload="getWelcome()">
	<div id="welcome"></div>
	<p>This is an example website.</p>
</body>
</html>
